<!DOCTYPE html>
<html>
<head>
        <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<style>
canvas {
    border:1px solid #d3d3d3;
    background-color: #f1f1f1;
}
</style>
</head>
<body onload="startGame()">
<script>

var myGamePiece;
var myGamePiece2;
var myDrawGrid;

function startGame() {
    myGamePiece = new component(30, 30, "red", 120, 120);
    //myGamePiece2 = new component(30, 30, "red", 70, 30);
    myDrawGrid = new component2(30,30);
    myGameArea.start();
}

function updateGameArea() {
    myGameArea.clear();
    myGamePiece.update();
    //myGamePiece2.update();
    myDrawGrid.update();
}

var myGameArea = {
    canvas : document.createElement("canvas"),
    start : function() {
        this.canvas.width = 480;
        this.canvas.height = 270;
        this.context = this.canvas.getContext("2d");
        document.body.insertBefore(this.canvas, document.body.childNodes[0]);
        this.interval = setInterval(updateGameArea, 20);
    },
    clear : function() {
        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
    }


}

function component2(width, height){

    this.dx = width;
    this.dy = height;

    this.update = function(){
        ctx = myGameArea.context;
        this.drawGrid(ctx.canvas.width,ctx.canvas.height);
    }

    this.drawGrid = function(width, height){
        //ctx = myGameArea.context;
        //var dx = this.width;
        //var dy = this.height;

    var x = 0;
    var y = 0;
    var w = width;
    var h = height;

    var xy = 10;

    ctx.lineWidth = 1;

    while (y < h) {
      y = y + this.dy;
      ctx.moveTo(x, y);
      ctx.lineTo(w, y);


      //ctx.font = "1px Calibri";
      //ctx.fillText(xy, x, y);
      xy += 10;
    }

    


    y =0;
    xy =10;
    while (x < w) {
      x = x + this.dx;
      ctx.moveTo(x, y);
      ctx.lineTo(x,h);

      //ctx.font = "1px Calibri";
      //ctx.fillText(xy,x,10);
      xy+=10;
    }

    ctx.stroke();

    }

}

function component(width, height, color, x, y) {
    this.width = width;
    this.height = height;
    this.x = x;
    this.y = y;
    this.moveR=true
    this.moveL=false
    this.moveUp=false
    this.moveDown=false
    this.update = function(){
        ctx = myGameArea.context;
        ctx.fillStyle = color;
        ctx.fillRect(this.x, this.y, this.width, this.height);
        this.moveSquare(ctx.canvas.width,ctx.canvas.height);
    }

    this.moveSquare=function (width,height) {
        //ruch w prawo
        if(this.x>= width-this.width && this.moveR ){
            this.moveR=false;
            this.moveUp=true;
        } else if(this.x< width-this.width && this.moveR ){
            this.x += 1;
            return 1;
        }


        if(this.y<0 && this.moveUp) {
            this.moveL=true;
            this.moveUp=false;
        } else if (this.y>=0 && this.moveUp) {
            this.y -= 1;
            return 1;
        }

        if(this.y>height-this.height && this.moveDown) {
            this.moveDown=false
            this.moveR=true
        } else if (this.y<=height-this.height && this.moveDown) {
            this.y += 1;
            return 1;
        }

        if (this.x<0 && this.moveL) {
            this.moveDown=true;
            this.moveL=false;
        } else if (this.x>=0 && this.moveL) {
            this.x -= 1;
            return 1;
        }

    }


}



</script>
<p>The red square is actually being drawn 50 times per second.</p>
</body>
</html>